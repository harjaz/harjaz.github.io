<!DOCTYPE HTML>
<html lang="en>"
<head>
    <meta charset="utf-8">
    <title>JavaScript Test Page</title>
    <style>
        body  {
        color:rgb(0, 0, 50); font-family: monospace, fantasy, cursive, sans-serif, serif;
        display: flex;  flex-flow: row wrap; align-items: center; align-content: center; justify-content: space-around;}
        #banner {width:100vw; background-color:aliceblue; border-radius: 15px; margin-bottom: 5px;
        font-size: 50px; line-height: 0px; text-align: center;
        box-shadow: 0px 0px 10px rgb(0, 0, 50); text-shadow: 0px 0px 1px rgb(0, 0, 50);}
        #console {margin-top: 15px; min-height: 150px; width:100vw; background-color:rgb(255, 255, 150) }
        canvas {border: 1px solid black; background: aliceblue}
        #instruc {font-family: fantasy; text-align: center; font-size: 30px; line-height: 0px; height: 25px}
        button {background-color: aliceblue; color: rgb(0, 0, 50)}
        button:hover {background-color: yellow}
    </style>
</head>
<body>
    <div id="banner"><p>JavaScript Test Page</p></div>
    <div> Type for key codes
            <input id="field1" size='10' /></div>
    <div id="pizzacalc">
        <b>Pizza calculator</b>
        Diameter (in) <input id="diam1" size='10'/>
        Crust (in)<input id="crust1" value=1 size='10'/>
        # of pizzas <input id="num1" value=1 size='10'/>
        Total cost <input id="cost1" size='10'/>
        <button class="button" id="pizzabutton">Calculate!</button>
        </div>
    <div><button class="button" id="canvasbutton">Test canvas</button>
        <button class="button" id="clearbutton">Clear canvas</button>
        <button class="button" id="playbutton">Play</button>
        <button class="button" id="resetbutton">Reset</button>
        </div>
    <div><p id="instruc"></p>
    <canvas id="myCanvas" width="700" height="700"></canvas></div>
<script>
    window.onload=function(){
    var blankpizzacalc = document.querySelector('#pizzacalc').innerHTML;
    document.querySelector('#field1').addEventListener('keydown', function(){
        printvas('Key: ' + event.key + ' Code: ' + event.keyCode)
        });
    document.querySelector('#pizzabutton').addEventListener("click", function(){
        var diam = document.querySelector('#diam1').value;
        var crust = document.querySelector('#crust1').value;
        var num = document.querySelector('#num1').value;
        var cost = document.querySelector('#cost1').value;
        var worth = (num*Math.PI*Math.pow((diam/2)-crust,2)/cost);
        printvas( worth + ' square inches of pizza per dollar');
        document.querySelector('#pizzacalc').innerHTML=blankpizzacalc;
        });
    // Canvas JS
    var canvas, ctx, w, h, z;
    var arrowup=false; var arrowdown=false; var arrowright=false; var arrowleft=false; var control=false; var direction="down"
    var player = {x:350,y:200,height:20,width:10,color:'green',xvel:0,yvel:0};
    var balls=makeballs()
    var thisbullet = {};
    var bullets = [];
    canvas = document.querySelector("#myCanvas");
        ctx = canvas.getContext('2d');
        ctx.font = "20px monospace";
        w = canvas.width; h=canvas.height; z=25;
    function funckeydown(event){
        if (event.key=='ArrowUp'){arrowup=true};
        if (event.key=='ArrowDown'){arrowdown=true};
        if (event.key=='ArrowRight'){arrowright=true};
        if (event.key=='ArrowLeft'){arrowleft=true};
        if (event.key=='Control'){control=true};
        }
    function funckeyup(event) {
        if (event.key=='ArrowUp'){arrowup=false};
        if (event.key=='ArrowDown'){arrowdown=false};
        if (event.key=='ArrowRight'){arrowright=false};
        if (event.key=='ArrowLeft'){arrowleft=false};
        if (event.key=='Control'){control=false};
        }
    function bullettemplate(){
        return {x:0,y:0,radius:5,color:'blue',xvel:0,yvel:0};
    }
    function printvas(message){
        ctx.fillText(message,0,z);
        z += 25;
        }
    function clearvas(){
        ctx.clearRect(0,0,w,h);
        z = 25; 
        }
    function makeballs(){
        ballarray=[];
        for (var i=0; i<50; i++) {
            newball={x:350, y:500, radius:20, color:'red', xvel:-5+Math.random()*10, yvel:-5+Math.random()*10};
            ballarray.push(newball)
        }
        return ballarray
    }
    function drawplayer(player){
        ctx.save();
        ctx.translate(player.x,player.y);
        ctx.fillStyle=player.color;
        ctx.fillRect (0,0,player.width,player.height)
        ctx.restore();
        }
    function drawballs(balls){
        for (var i=0; i<balls.length; i++){
            ctx.save();
            ctx.translate(balls[i].x,balls[i].y);
            ctx.fillStyle=balls[i].color;
            ctx.beginPath();
            ctx.arc(0, 0, balls[i].radius, 0, 2*Math.PI);
            ctx.fill();
            ctx.restore();
        }
        }
    function drawbullets(bullets){
        for (var i = 0; i < bullets.length ; i++) {
            ctx.save();
            ctx.translate(bullets[i].x,bullets[i].y);
            ctx.fillStyle=bullets[i].color;
            ctx.beginPath();
            ctx.arc(0, 0, bullets[i].radius, 0, 2*Math.PI);
            ctx.fill();
            ctx.restore();
        }
        }
    function moveplayer(player){
        //allow movement based on arrow keys, set last moved direction, and trigger shoot function with control;
        if (arrowup){player.y -= 10;direction="up"
        } else if (arrowdown){player.y += 10;direction="down"
        } else if (arrowright){player.x += 10;direction="right"
        } else if (arrowleft){player.x -= 10;direction="left"};
        if (control){shoot();};
        //check for canvas boundaries
        if (player.x+player.width > w) {player.x=w-player.width};
        if (player.x < 0) {player.x=0};
        if (player.y+player.height > h) {player.y=h-player.height}
        if (player.y < 0) {player.y=0}
        }
    function shoot(){
            thisbullet = bullettemplate();
            thisbullet.x=player.x;
            thisbullet.y=player.y;
            if (direction=="up"){thisbullet.yvel=-20
            } else if (direction=="down"){thisbullet.yvel=20
            } else if (direction=="right"){thisbullet.xvel=20
            } else if (direction=="left"){thisbullet.xvel=-20};
            bullets.push(thisbullet);
        }
    function moveballs(balls){
        for (var i=0; i<balls.length; i++){
            balls[i].x += balls[i].xvel;
            balls[i].y += balls[i].yvel;
            if (balls[i].x+balls[i].radius >= w || balls[i].x-balls[i].radius <= 0){ balls[i].xvel = -balls[i].xvel}
            if (balls[i].y+balls[i].radius >= h || balls[i].y-balls[i].radius <= 0){balls[i].yvel = -balls[i].yvel}
        }
        }
    function movebullets(bullets){
        for (var i = 0; i < bullets.length ; i++) {
        bullets[i].x += bullets[i].xvel;
        bullets[i].y += bullets[i].yvel;
        }
        }
    function deathcheck(player,balls){
        for (var i=0; i<balls.length; i++){
            if (balls[i].x+balls[i].radius >= player.x && balls[i].x-balls[i].radius <= player.x+player.width && balls[i].y+balls[i].radius >= player.y && balls[i].y-balls[i].radius <= player.y+player.height){
                clearvas();
                printvas("YOU DIED!");
                return(true)
        }}
        for (var i = 0; i < bullets.length ; i++) {
            thisbullet=bullets[i]
            for (var j=0; j<balls.length;j++){
                if (balls[j].x-balls[j].radius <= thisbullet.x+thisbullet.radius && thisbullet.x-thisbullet.radius <= balls[j].x+balls[j].radius &&
                balls[j].y+balls[j].radius >= thisbullet.y-thisbullet.radius && thisbullet.y+thisbullet.radius >= balls[j].y-balls[j].radius){
                    balls.splice(j,1)
        }}}
        if (balls.length==0){
                clearvas();
                printvas("YOU WON!");
                return(true)
        }}
    function play() {
        document.querySelector('#instruc').innerHTML="<p>Use arrows to move and CTRL to fire</p>";
        clearvas();
        drawplayer(player);
        drawballs(balls);
        drawbullets(bullets);
        moveplayer(player);
        moveballs(balls)
        movebullets(bullets);
        if (deathcheck(player,balls)==true){return}
        requestAnimationFrame(play);
        }
    window.addEventListener('keydown', funckeydown,false);
    window.addEventListener('keyup', funckeyup,false);
    document.querySelector('#canvasbutton').addEventListener("click", function(){
        printvas('Event type: '+ event.type + ' | Event target: ' + event.target);
        });
    document.querySelector('#clearbutton').addEventListener("click", function(){
        clearvas();
        });
    document.querySelector('#playbutton').addEventListener("click", function(){
        play();
        });
    document.querySelector('#resetbutton').addEventListener("click", function(){
        location.reload(),false
    });
}
</script>
</body>
</html>
<!--
    Add text: document.querySelector("#ID").insertAdjacentHTML("afterbegin",<p>TEXT</p>)
    JS to modify HTML elements: elem=document.createElement("tagname"); elem.properties = changes ; document.body.append(elem);
    Return function: "Return condition ? output : condition ? output : output" to test conditions to determine what to return 
    Arrays: use array.push() to add element, array.pop() to delete last, and array.splice(index #, how many to delete) to delete; array.length for length
    Strings: string.length works, but other array properties don't, need to use string.substring(start,end) to select the indexes to re-define as variable, and use +string to combine
    
<div id='audio/video'>
    <video width="" height="" controls="controls">
            <source src="" type="" />
        Message if failed
    </video>
        Use video-elem.play() or .pause() or .currentTime=x
    <audio controls="controls" >
            <source src="" type="" />
            Message if failed
    </audio>

    Canvas syntax
    GENERAL: ctx.fillStyle OR ctx.strokeStyle = 'color' AND ctx.lineWidth
    RECTANGLES: ctx.fillRect OR ctx.strokeRect (a,b,c,d)
    CIRCLES: ctx.beginPath() -> ctx.arc(x, y, radius, 0, 2*Math.PI); -> ctx.fill() OR ctx.stroke()
    TEXT: ctx.font = "20px monospace" -> ctx.fillText or ctx.strokeText("message", x, y)
    FUNCTIONS: ctx.save() -> ctx.translate(x, y) -> draw -> ctx.restore(); 
    MOUSE: mouseevent.clientX or Y, use canvas.getBoundingClientRect().left and .top to correct for position on canvas -->