<!DOCTYPE HTML>
<html lang="en>"
<head>
    <meta charset="utf-8">
    <title>FB Game</title>
    <style></style>
</head>
<body>
    <script src="https://connect.facebook.net/en_US/fbinstant.6.2.js"></script>
    <script src="lib/phaser-facebook-instant-games.js"></script>
<script>
FBInstant.initializeAsync().then(function() {        
    var config = {
        type: Phaser.AUTO,
        width: window.innerWidth,
        height: window.innerHeight
    };
    new Phaser.Game(config);
    });

// Informs the SDK of loading progress
class Preloader extends Phaser.Scene {
    constructor ()
    {
        super('Preloader');
    }
    preload ()
        {
            this.facebook.once('startgame', this.startGame, this);
            this.facebook.showLoadProgress(this); //FBInstant.setLoadingProgress(progress);
        }
        startGame ()
        {
            this.scene.start('MainMenu');
        }
    }

// Once all assets are loaded, tells the SDK 
// to end loading view and start the game
FBInstant.startGameAsync().then(function() {
    // Retrieving context and player information can only be done
    // once startGameAsync() resolves
    var contextId = FBInstant.context.getID();
    var contextType = FBInstant.context.getType();
    var playerName = FBInstant.player.getName();
    var playerPic = FBInstant.player.getPhoto();
    var playerId = FBInstant.player.getID();

    // Once startGameAsync() resolves it also means the loading view has 
    // been removed and the user can see the game viewport
    game.start();
});

//Saving Stats
this.facebook.on('savestats', function (data) {
    //  Handle what the game should do after the stats have saved
    });
this.facebook.on('savestatsfail', function (error) {
    //  Handle what the game should do if the stats fail to save
    });
this.facebook.saveStats(stuff_to_save);

//Pulling Stats
this.facebook.on('getstats', function (data) {
    //  Handle the loaded data here
    });
this.facebook.on('getstatsfail', function (error) {
    //  Handle what the game should do if the stats fail to load
    });
this.facebook.getStats(); // or with specifics, e.g. ([ 'level', 'race' ]);

//Save Data
this.facebook.on('savedata', function (data) {
    //  Handle what the game should do when the data saves
    });
this.facebook.on('savedatafail', function (error) {
    //  Handle what the game should do if the data fails to save
    });
this.facebook.data.set('property', 'value');
this.facebook.saveData(data_object);
//Edit Data
this.facebook.data.values.property += 100;

//Pull Data
this.facebook.on('getdata', function (data) {
    //  Handle what the game should do when the data is returned
    this.element = this.facebook.data.get('property');
    });
this.facebook.on('getdatafail', function (error) {
    //  Handle what the game should do if the data fails to get
    });
this.facebook.getData([ 'name', 'pet', 'combatBonus' ]);

</script>
</body>
</html>